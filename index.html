<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encontre meu dono - Por Guti</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden-contact { display: none; }
        .found-stamp { transform: rotate(-15deg); border: 3px solid #16a34a; color: #16a34a; background: rgba(255,255,255,0.9); z-index: 40; }
        .preview-img { width: 100%; height: 100%; object-fit: cover; }
        .zoonoses-blur { backdrop-filter: blur(25px); background: rgba(0,0,0,0.95); border: 2px solid #ef4444; }
        .tab-btn { transition: all 0.3s; border-bottom: 4px solid transparent; }
        .tab-active { border-bottom: 4px solid #facc15; background: rgba(255,255,255,0.1); color: #facc15; }
        .btn-denuncia-active { border-bottom: 4px solid #ef4444 !important; color: #ef4444 !important; background: rgba(239, 68, 68, 0.1); }
        .admin-only { display: none; }
        .admin-mode .admin-only { display: block !important; }
        .admin-mode .card-admin-border { border: 2px solid #ef4444 !important; }
        .gestor-on { color: #facc15 !important; opacity: 1 !important; font-weight: bold; }
    </style>
</head>
<body class="bg-gray-100 font-sans flex flex-col min-h-screen text-gray-900 transition-all">

    <header class="bg-blue-600 text-white shadow-2xl sticky top-0 z-50">
        <div class="p-4 text-center relative border-b border-blue-500">
            <h1 class="text-xl font-black uppercase italic leading-none tracking-tighter">Encontre meu dono</h1>
            <p class="text-[10px] font-light tracking-widest mt-1 opacity-80 uppercase font-bold text-blue-200">"Por Guti"</p>
            <button onclick="toggleGestor()" id="btnGestor" class="absolute top-2 right-2 opacity-20 hover:opacity-100 text-[10px]">üîí</button>
        </div>
        
        <nav class="flex w-full bg-blue-700">
            <button onclick="mudarGuia('encontrados')" id="tab-encontrados" class="tab-btn flex-1 py-4 text-[10px] font-black uppercase tracking-tighter border-r border-blue-600 tab-active">Encontrados</button>
            <button onclick="mudarGuia('perdidos')" id="tab-perdidos" class="tab-btn flex-1 py-4 text-[10px] font-black uppercase tracking-tighter border-r border-blue-600">Perdi meu Pet</button>
            <button onclick="mudarGuia('denuncia')" id="tab-denuncia" class="tab-btn flex-1 py-4 text-[10px] font-black uppercase tracking-tighter text-red-400">üö® DEN√öNCIA SIGILOSA</button>
        </nav>
    </header>

    <main class="container mx-auto p-4 flex-grow max-w-6xl">
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6">
            
            <section class="lg:col-span-4">
                <div id="form-container" class="bg-white p-5 rounded-2xl shadow-lg border-t-4 border-blue-500 sticky top-28">
                    <h2 id="form-title" class="text-lg font-black mb-4 text-gray-800 uppercase italic">üì∏ Encontrei um Pet</h2>
                    
                    <form id="mainForm" class="space-y-4">
                        <input type="hidden" id="current_tab" value="encontrados">
                        
                        <div class="grid grid-cols-2 gap-2 text-[10px]">
                            <select id="bairro" class="p-3 border rounded-lg bg-gray-50 font-bold" required>
                                <option value="">Bairro em Mongagu√°...</option>
                                <option value="Agenor de Campos">Agenor de Campos</option>
                                <option value="Centro">Centro</option>
                                <option value="Ita√≥ca">Ita√≥ca</option>
                                <option value="Vera Cruz">Vera Cruz</option>
                                <option value="Jussara">Jussara</option>
                                <option value="Outros">Outros...</option>
                            </select>
                            
                            <select id="categoria" class="p-3 border rounded-lg font-black bg-gray-50 text-blue-600 border-blue-200">
                                <option value="normal">Situa√ß√£o Normal</option>
                                <option value="zoonoses">üö® ATROPELADO / FERIDO</option>
                            </select>
                        </div>

                        <textarea id="descricao" placeholder="Descreva os detalhes aqui..." class="w-full p-3 border rounded-lg text-xs h-24 shadow-sm" required></textarea>

                        <div id="contato-box" class="bg-yellow-50 p-3 rounded-xl border border-yellow-200">
                            <label class="block text-[9px] font-black text-yellow-700 uppercase mb-1">Seu WhatsApp (Sigiloso):</label>
                            <input type="tel" id="whatsapp_contato" placeholder="Ex: 13991753601" class="w-full p-2 border rounded-lg text-xs outline-none" required>
                        </div>

                        <div class="bg-gray-50 p-3 rounded-xl border border-dashed border-gray-300">
                            <label class="block text-[9px] font-black text-gray-500 uppercase mb-1">Anexar Foto:</label>
                            <input type="file" id="input_foto" accept="image/*" class="text-[10px] w-full">
                            <p id="msg-video" class="hidden text-[8px] text-red-500 mt-2 font-bold leading-tight italic">
                                * Por quest√µes de sigilo e seguran√ßa, anexe apenas uma FOTO. Nossa equipe entrar√° em contato via WhatsApp para solicitar v√≠deos e detalhes complementares.
                            </p>
                        </div>

                        <button type="button" onclick="obterLocalizacao()" id="btnLoc" class="w-full py-3 bg-gray-100 text-gray-700 rounded-lg text-[10px] font-black border hover:bg-gray-200">üìç MARCAR LOCALIZA√á√ÉO GPS</button>
                        <input type="hidden" id="coords" value="">

                        <button type="submit" id="btnSubmit" class="w-full bg-blue-600 text-white font-black py-4 rounded-xl shadow-xl uppercase text-xs tracking-widest hover:scale-[1.02] transition-all">Publicar Agora</button>
                    </form>
                </div>
            </section>

            <section class="lg:col-span-8">
                <div id="admin-warning" class="hidden admin-only bg-red-600 p-3 rounded-lg mb-4 text-[10px] font-black text-white uppercase text-center shadow-lg">
                    üîí GEST√ÉO MONGBeach ATIVA: Visualizando Den√∫ncias e Dados Privados
                </div>
                <div id="petFeed" class="grid grid-cols-2 md:grid-cols-3 gap-4"></div>
            </section>
        </div>
    </main>

    <footer class="bg-gray-900 text-white p-8 mt-10 text-center border-t-4 border-yellow-400">
        <p class="text-[10px] opacity-60 uppercase font-black mb-1 tracking-widest">MONGBeach Tecnologia</p>
        <p class="text-sm">Desenvolvido por <span class="text-blue-400 font-black italic uppercase">MONGBeach</span></p>
        <p class="text-xl font-black text-yellow-400 mt-2 tabular-nums">(13) 99175-3601</p>
    </footer>

    <script>
        const SENHA_GESTOR = "123Pin567Pin";
        let pets = JSON.parse(localStorage.getItem('pets_mongagua_v2')) || [];

        function mudarGuia(guia) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('tab-active', 'btn-denuncia-active'));
            const tab = document.getElementById(`tab-${guia}`);
            tab.classList.add('tab-active');
            
            const msgVideo = document.getElementById('msg-video');
            if(guia === 'denuncia') {
                tab.classList.add('btn-denuncia-active');
                msgVideo.classList.remove('hidden');
            } else {
                msgVideo.classList.add('hidden');
            }

            document.getElementById('current_tab').value = guia;
            const formTitle = document.getElementById('form-title');
            const btnSubmit = document.getElementById('btnSubmit');

            if(guia === 'encontrados') {
                formTitle.innerText = "üì∏ Encontrei um Pet";
                btnSubmit.className = "w-full bg-blue-600 text-white font-black py-4 rounded-xl shadow-xl uppercase text-xs";
            } else if(guia === 'perdidos') {
                formTitle.innerText = "üîç Perdi meu Pet";
                btnSubmit.className = "w-full bg-green-600 text-white font-black py-4 rounded-xl shadow-xl uppercase text-xs";
            } else {
                formTitle.innerText = "üö® Den√∫ncia Sigilosa";
                btnSubmit.className = "w-full bg-red-600 text-white font-black py-4 rounded-xl shadow-xl uppercase text-xs";
            }
            renderFeed();
        }

        function toggleGestor() {
            const isAdmin = document.body.classList.contains('admin-mode');
            if(isAdmin) {
                if(confirm("Deseja sair do Modo Gestor?")) {
                    document.body.classList.remove('admin-mode');
                    document.getElementById('btnGestor').classList.remove('gestor-on');
                    document.getElementById('admin-warning').classList.add('hidden');
                    document.getElementById('btnGestor').innerText = "üîí";
                    renderFeed();
                }
            } else {
                if(prompt("Senha de Gestor MONGBeach:") === SENHA_GESTOR) {
                    document.body.classList.add('admin-mode');
                    document.getElementById('btnGestor').classList.add('gestor-on');
                    document.getElementById('admin-warning').classList.remove('hidden');
                    document.getElementById('btnGestor').innerText = "üîì SAIR";
                    renderFeed();
                }
            }
        }

        function obterLocalizacao() {
            navigator.geolocation.getCurrentPosition((pos) => {
                document.getElementById('coords').value = `${pos.coords.latitude},${pos.coords.longitude}`;
                document.getElementById('btnLoc').innerText = "‚úÖ GPS CAPTURADO";
                document.getElementById('btnLoc').className = "w-full py-3 bg-green-100 text-green-700 rounded-lg text-[10px] font-black border border-green-300";
            });
        }

        document.getElementById('mainForm').onsubmit = function(e) {
            e.preventDefault();
            const fileInput = document.getElementById('input_foto');
            const reader = new FileReader();

            if (fileInput.files[0]) {
                reader.readAsDataURL(fileInput.files[0]);
                reader.onload = () => salvarDado(reader.result);
            } else {
                salvarDado(null);
            }
        };

        function salvarDado(midiaData) {
            const novoItem = {
                id: Date.now(),
                guia: document.getElementById('current_tab').value,
                bairro: document.getElementById('bairro').value,
                categoria: document.getElementById('categoria').value,
                descricao: document.getElementById('descricao').value,
                whatsapp: document.getElementById('whatsapp_contato').value.replace(/\D/g, ''),
                coords: document.getElementById('coords').value,
                midia: midiaData,
                status: 'ativo'
            };
            pets.unshift(novoItem);
            localStorage.setItem('pets_mongagua_v2', JSON.stringify(pets));
            renderFeed();
            document.getElementById('mainForm').reset();
            document.getElementById('btnLoc').innerText = "üìç MARCAR LOCALIZA√á√ÉO GPS";
            document.getElementById('btnLoc').className = "w-full py-3 bg-gray-100 text-gray-700 rounded-lg text-[10px] font-black border";
            alert("Enviado com sucesso!");
        }

        function renderFeed() {
            const feed = document.getElementById('petFeed');
            const currentTab = document.getElementById('current_tab').value;
            const isAdmin = document.body.classList.contains('admin-mode');
            feed.innerHTML = '';

            pets.forEach(item => {
                if(item.guia === 'denuncia' && !isAdmin) return;
                if(!isAdmin && item.guia !== currentTab) return;

                const card = document.createElement('div');
                const isZoonoses = item.categoria === 'zoonoses';
                const isResolvido = item.status === 'encontrado';
                
                card.className = `bg-white rounded-2xl shadow-lg border-b-4 overflow-hidden relative flex flex-col ${item.guia === 'denuncia' ? 'border-red-600 card-admin-border' : (item.guia === 'perdidos' ? 'border-green-500' : 'border-blue-500')} ${isResolvido ? 'opacity-40' : ''}`;
                
                card.innerHTML = `
                    <div class="h-32 bg-gray-200 relative overflow-hidden flex items-center justify-center">
                        ${item.midia ? `<img src="${item.midia}" class="preview-img">` : '<span class="text-3xl font-black opacity-10 italic uppercase tracking-tighter">MONGBeach</span>'}
                        
                        ${isZoonoses && !isResolvido ? `
                            <div class="absolute inset-0 z-30 zoonoses-blur flex flex-col items-center justify-center text-center p-3">
                                <p class="text-red-500 font-black text-[9px] uppercase mb-1 tracking-tighter">‚ö†Ô∏è CONTE√öDO SENS√çVEL</p>
                                <button onclick="this.parentElement.remove()" class="bg-red-600 text-white text-[8px] font-black px-4 py-1.5 rounded-full uppercase">Exibir</button>
                            </div>
                        ` : ''}

                        ${isResolvido ? '<div class="absolute inset-0 flex items-center justify-center z-40"><span class="found-stamp font-black px-2 py-1 uppercase text-[10px]">RESOLVIDO</span></div>' : ''}
                        ${isAdmin ? `<button onclick="deletarItem(${item.id})" class="absolute top-1 right-1 bg-red-600 text-white rounded-full w-5 h-5 text-[10px] z-50 font-bold shadow-lg">X</button>` : ''}
                    </div>

                    <div class="p-3 flex-grow flex flex-col">
                        <div class="flex justify-between items-center mb-1">
                            <span class="text-[7px] font-black px-2 py-0.5 rounded bg-white text-gray-700 border uppercase border-gray-200">${item.bairro}</span>
                            <span class="text-[7px] font-black ${item.guia === 'denuncia' ? 'text-red-600 underline' : 'text-gray-400'} uppercase italic">${item.guia}</span>
                        </div>
                        <p class="font-bold text-gray-800 text-[10px] mt-1 h-12 overflow-hidden leading-tight italic">"${item.descricao}"</p>
                        
                        ${item.guia === 'denuncia' && isAdmin ? `
                            <div class="mt-3 p-2 bg-red-50 border border-red-200 rounded-lg animate-pulse">
                                <p class="text-[8px] font-black text-red-600 uppercase mb-1">üîí VALIDA√á√ÉO GESTOR</p>
                                <a href="https://wa.me/55${item.whatsapp}" target="_blank" class="text-green-600 font-black text-[10px] block underline mb-1 uppercase tracking-tighter">üì≤ Contatar Denunciante</a>
                                ${item.coords ? `<a href="https://www.google.com/maps?q=${item.coords}" target="_blank" class="text-blue-500 text-[8px] block font-bold underline italic">üìç Local da Ocorr√™ncia</a>` : ''}
                            </div>
                        ` : ''}

                        ${item.guia !== 'denuncia' && !isResolvido ? `
                            <button onclick="revelar(this)" class="w-full mt-3 py-2.5 rounded-xl bg-gray-900 text-white text-[9px] font-black uppercase shadow-lg">Ver Contato / Local</button>
                            <div class="hidden-contact mt-3 text-center">
                                <a href="https://wa.me/55${item.whatsapp}" target="_blank" class="text-green-600 font-black text-[11px] block underline uppercase">Falar no WhatsApp</a>
                                ${item.coords ? `<a href="https://www.google.com/maps?q=${item.coords}" target="_blank" class="text-blue-500 text-[8px] block mt-1 font-black underline italic uppercase tracking-tighter">üìç Local no Google Maps</a>` : ''}
                                <button onclick="marcarResolvido(${item.id})" class="text-[7px] text-gray-400 font-bold block w-full mt-3 underline uppercase">Finalizar Registro</button>
                            </div>
                        ` : (item.guia === 'denuncia' && !isAdmin ? '<p class="text-[7px] text-red-600 font-black text-center mt-3 border border-red-100 py-1 bg-red-50 rounded italic uppercase tracking-widest">üîí Sob Sigilo</p>' : '')}
                    </div>
                `;
                feed.appendChild(card);
            });
        }

        function revelar(btn) { btn.nextElementSibling.style.display = 'block'; btn.style.display = 'none'; }
        function marcarResolvido(id) { 
            const p = pets.find(x => x.id === id); 
            if(p) { p.status = 'encontrado'; localStorage.setItem('pets_mongagua_v2', JSON.stringify(pets)); renderFeed(); }
        }
        function deletarItem(id) { 
            if(confirm("Deseja apagar este registro definitivamente?")) { 
                pets = pets.filter(x => x.id !== id); 
                localStorage.setItem('pets_mongagua_v2', JSON.stringify(pets)); 
                renderFeed(); 
            } 
        }
        renderFeed();
    </script>
</body>
</html>
